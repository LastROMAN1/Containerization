
pipeline {
  agent any
  stages {
    stage ('Checkout SCM') {
      steps {
        // Clone the source code from GitHub
        // Replace the URL with your own
        git 'https://github.com/NyerhovwoOnitcha/Containerization.git'
      }
    }

    dir('/tooling') {
      sh 'pwd'
    }


    stage ('Build') {
      steps {
        // Build the docker image using the Dockerfile in the project root
        script {
          def toolingImage = docker.build("${env.BRANCH_NAME}-tooling:${env.BUILD_ID}") 
        }
      }
    }
    stage ('Push') {
      steps {
        // Push the docker image to the docker hub repository
        script {
          docker.withRegistry(, '5c8d62c3-46cf-4989-97c0-0d1392a28899') {
            toolingImage.push("${env.BRANCH_NAME}-tooling:${env.BUILD_ID}")
          }
        }
      }
    }

    stage('Cleanup after build') {
      steps {
        cleanWs(cleanWhenAborted: true, cleanWhenFailure: true, cleanWhenNotBuilt: true, cleanWhenUnstable: true, deleteDirs: true)
      }
    }
  }
}
